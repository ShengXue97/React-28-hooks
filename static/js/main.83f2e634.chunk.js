(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(21)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),l=n.n(c),i=n(1),o=r.a.createContext({}),u=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],l=n[1];return r.a.createElement(o.Provider,{value:{login:function(){l(!0)},isAuth:c}},e.children)},s=(n(13),n(7)),d=(n(14),function(e){return r.a.createElement("div",{className:"card"},e.children)}),m=(n(15),n(16),function(){return r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))}),E=r.a.memo(function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),c=n[0],l=n[1],o=Object(a.useState)(""),u=Object(i.a)(o,2),s=u[0],E=u[1];console.log("IngredientForm rendered");return r.a.createElement("section",{className:"ingredient-form"},r.a.createElement(d,null,r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addIngredientHandler({title:c,amount:s})}},r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"title"},"Name"),r.a.createElement("input",{type:"text",id:"title",value:c,onChange:function(e){var t=e.target.value;l(t)}})),r.a.createElement("div",{className:"form-control"},r.a.createElement("label",{htmlFor:"amount"},"Amount"),r.a.createElement("input",{type:"number",id:"amount",value:s,onChange:function(e){var t=e.target.value;E(t)}})),r.a.createElement("div",{className:"ingredient-form__actions"},r.a.createElement("button",{type:"submit"},"Add Ingredient"),e.isLoading&&r.a.createElement(m,null)))))}),f=(n(17),function(e){return console.log("Ingredient list rendered"),r.a.createElement("section",{className:"ingredient-list"},r.a.createElement("h2",null,"Loaded Ingredients"),r.a.createElement("ul",null,e.ingredients.map(function(t){return r.a.createElement("li",{key:t.id,onClick:e.onRemoveItem.bind(void 0,t.id)},r.a.createElement("span",null,t.title),r.a.createElement("span",null,t.amount,"x"))})))}),b=(n(18),r.a.memo(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"backdrop",onClick:e.onClose}),r.a.createElement("div",{className:"error-modal"},r.a.createElement("h2",null,"An Error Occurred!"),r.a.createElement("p",null,e.children),r.a.createElement("div",{className:"error-modal__actions"},r.a.createElement("button",{type:"button",onClick:e.onClose},"Okay"))))})),g=(n(19),r.a.memo(function(e){var t=e.filteredIngredientsHandler,n=Object(a.useState)(""),c=Object(i.a)(n,2),l=c[0],o=c[1],u=Object(a.useRef)();return Object(a.useEffect)(function(){var t=setTimeout(function(){l===u.current.value&&e.filteredIngredientsHandler(l)},500);return function(){clearTimeout(t)}},[l,t,u]),r.a.createElement("section",{className:"search"},r.a.createElement(d,null,r.a.createElement("div",{className:"search-input"},r.a.createElement("label",null,"Filter by Title"),r.a.createElement("input",{ref:u,type:"text",value:l,onChange:function(e){o(e.target.value)}}))))})),p=n(2),v=function(e,t){switch(t.type){case"SEND":return{loading:!0,error:null};case"RESPONSE":return Object(p.a)(Object(p.a)({},e),{},{loading:!1});case"ERROR":return{loading:!1,error:t.errorMessage};case"CLEAR":return Object(p.a)(Object(p.a)({},e),{},{error:null});default:throw new Error("Should not get there!")}},O=function(e){var t=Object(a.useReducer)(v,{loading:!1,error:null}),n=Object(i.a)(t,2),r=n[0],c=n[1],l=Object(a.useCallback)(function(){c({type:"CLEAR"})},[]),o=Object(a.useCallback)(function(t,n,a,r){c({type:"SEND"}),fetch(t,{method:n,body:a,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){switch(n){case"POST":e({type:"ADD",ingredient:Object(p.a)({id:t.name},r)});break;case"DELETE":e({type:"DELETE",id:r});break;case"GET":var a=[];for(var l in t)a.push({id:l,title:t[l].title,amount:t[l].amount});e({type:"SET",ingredients:a})}c({type:"RESPONSE"})}).catch(function(e){c({type:"ERROR",errorMessage:e.message})})},[]);return{isLoading:r.loading,error:r.error,sendRequest:o,clearError:l}},h=function(e,t){switch(t.type){case"SET":return t.ingredients;case"ADD":return[].concat(Object(s.a)(e),[t.ingredient]);case"DELETE":return e.filter(function(e){return e.id!==t.id});default:throw new Error("Should not get there!")}};var j=function(){var e=Object(a.useReducer)(h,[]),t=Object(i.a)(e,2),n=t[0],c=t[1],l=O(c),o=l.isLoading,u=l.error,s=l.sendRequest,d=l.clearError,m=Object(a.useState)([]),p=Object(i.a)(m,2),v=p[0],j=p[1],C=Object(a.useState)(""),y=Object(i.a)(C,2),N=y[0],S=y[1];Object(a.useEffect)(function(){s("https://react-getting-started-4c1f1-default-rtdb.asia-southeast1.firebasedatabase.app/ingredients.json","GET",null,[])},[]),Object(a.useEffect)(function(){if(""!==N){var e=N.toLowerCase(),t=n.filter(function(t){return t.title.toLowerCase().includes(e)});j(t)}else j(n)},[N,n]);var R=Object(a.useCallback)(function(e){s("https://react-getting-started-4c1f1-default-rtdb.asia-southeast1.firebasedatabase.app/ingredients.json","POST",JSON.stringify(e),e)},[]),k=Object(a.useCallback)(function(e){s("https://react-getting-started-4c1f1-default-rtdb.asia-southeast1.firebasedatabase.app/ingredients/".concat(e,".json"),"DELETE",null,e)},[]),w=Object(a.useMemo)(function(){return r.a.createElement(f,{ingredients:v,onRemoveItem:k})},[v,k]);return r.a.createElement("div",{className:"App"},u&&r.a.createElement(b,{onClose:d},u),r.a.createElement(E,{addIngredientHandler:R,isLoading:o}),r.a.createElement("section",null,r.a.createElement(g,{filteredIngredientsHandler:function(e){S(e)}}),w))},C=(n(20),function(e){var t=Object(a.useContext)(o);return r.a.createElement("div",{className:"auth"},r.a.createElement(d,null,r.a.createElement("h2",null,"You are not authenticated!"),r.a.createElement("p",null,"Please log in to continue."),r.a.createElement("button",{onClick:function(){t.login()}},"Log In")))}),y=function(e){var t=Object(a.useContext)(o),n=r.a.createElement(C,null);return t.isAuth&&(n=r.a.createElement(j,null)),n};l.a.render(r.a.createElement(u,null,r.a.createElement(y,null)),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.83f2e634.chunk.js.map